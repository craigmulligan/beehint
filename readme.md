# Beehint 

> Calculates hints for the NYT spelling-game.

## How to use it

Right click [this link](javascript%3A%20(function()%20%7B%20const%20CONTAINER_ID%20%3D%20%22beehint-container%22%3B%20function%20remove_element(element)%20%7B%20const%20exists%20%3D%20document.getElementById(element.id)%3B%20if%20(exists)%20%7B%20exists.remove()%3B%20%7D%20%7D%20function%20display_component(title%2C%20child)%20%7B%20const%20container%20%3D%20document.createElement(%22div%22)%3B%20const%20heading%20%3D%20document.createElement(%22h2%22)%3B%20heading.style.fontSize%20%3D%20%2220px%22%3B%20heading.style.fontWeight%20%3D%20%22800%22%3B%20heading.style.margin%20%3D%20%2210px%200px%22%3B%20heading.style.transform%20%3D%20%22uppercase%22%3B%20heading.innerHTML%20%3D%20title%3B%20container.appendChild(heading)%3B%20container.appendChild(child)%3B%20return%20container%3B%20%7D%20function%20get_current_words()%20%7B%20const%20words_list%20%3D%20document.getElementsByClassName(%22sb-wordlist-pag%22)%5B0%5D%3B%20const%20word_elements%20%3D%20words_list.getElementsByTagName(%22li%22)%3B%20const%20results%20%3D%20%5B%5D%3B%20for%20(var%20elem%20of%20word_elements)%20%7B%20results.push(elem.textContent)%3B%20%7D%20return%20results%3B%20%7D%20function%20get_word_starts(doc%2C%20words)%20%7B%20const%20elements%20%3D%20doc.querySelectorAll(%22.interactive-content%20.content%3Alast-child%20span%22)%3B%20const%20word_starts%20%3D%20%5B%5D%3B%20for%20(var%20elem%20of%20elements)%20%7B%20word_starts.push(elem.textContent.trim().split(%22%20%22).map((e)%20%3D%3E%20e.split(%22-%22)))%3B%20%7D%20const%20word_starts_map%20%3D%20word_starts.flat().sort().reduce((acc%2C%20a)%20%3D%3E%20%7B%20acc%5Ba%5B0%5D%5D%20%3D%20%7B%20total%3A%20a%5B1%5D%2C%20current%3A%200%20%7D%3B%20return%20acc%3B%20%7D%2C%20%7B%7D)%3B%20for%20(const%20word%20of%20words)%20%7B%20for%20(const%20start%20in%20word_starts_map)%20%7B%20if%20(word.startsWith(start))%20%7B%20word_starts_map%5Bstart%5D%5B%22current%22%5D%20%2B%3D%201%3B%20%7D%20%7D%20%7D%20return%20word_starts_map%3B%20%7D%20function%20get_matrix(doc%2C%20words)%20%7B%20const%20table%20%3D%20doc.querySelectorAll(%22.interactive-content%20.table%22)%5B0%5D%3B%20const%20matrix%20%3D%20%7B%7D%3B%20for%20(var%20i%20%3D%200%2C%20row%3B%20(row%20%3D%20table.rows%5Bi%5D)%3B%20i%2B%2B)%20%7B%20const%20row_key%20%3D%20row.cells%5B0%5D.innerText.trim().replace(%22%3A%22%2C%20%22%22)%3B%20matrix%5Brow_key%5D%20%3D%20%5B%5D%3B%20total_words_got%20%3D%200%3B%20for%20(var%20j%20%3D%200%2C%20col%3B%20(col%20%3D%20row.cells%5Bj%5D)%3B%20j%2B%2B)%20%7B%20total%20%3D%20col.innerText.trim()%3B%20if%20(row_key%20%3D%3D%20%22%22%20%7C%7C%20j%20%3D%3D%200%20%7C%7C%20total%20%3D%3D%20%22-%22)%20%7B%20matrix%5Brow_key%5D.push(total)%3B%20%7D%20else%20if%20(j%20%3D%3D%20row.cells.length%20-%201)%20%7B%20matrix%5Brow_key%5D.push(render_fraction(total_words_got%2C%20total))%3B%20%7D%20else%20%7B%20words_got%20%3D%200%3B%20for%20(const%20word%20of%20words)%20%7B%20if%20(word.charAt(0)%20%3D%3D%20row_key%20%26%26%20word.length%20%3D%3D%20matrix%5B%22%22%5D%5Bj%5D)%20%7B%20words_got%20%2B%3D%201%3B%20total_words_got%20%2B%3D%201%3B%20%7D%20%7D%20matrix%5Brow_key%5D.push(render_fraction(words_got%2C%20total))%3B%20%7D%20%7D%20%7D%20return%20matrix%3B%20%7D%20async%20function%20get_hints(words)%20%7B%20const%20link%20%3D%20document.getElementsByClassName(%22pz-toolbar-button__hints%22)%5B0%5D%3B%20const%20text%20%3D%20await%20fetch(link.href%2C%20%7B%20cache%3A%20%22force-cache%22%20%7D).then(function(res)%20%7B%20return%20res.text()%3B%20%7D)%3B%20const%20parser%20%3D%20new%20DOMParser()%3B%20const%20doc%20%3D%20parser.parseFromString(text%2C%20%22text%2Fhtml%22)%3B%20const%20word_starts%20%3D%20get_word_starts(doc%2C%20words)%3B%20const%20matrix%20%3D%20get_matrix(doc%2C%20words)%3B%20return%20%5Bword_starts%2C%20matrix%5D%3B%20%7D%20function%20display_word_starts(word_starts)%20%7B%20const%20ul%20%3D%20document.createElement(%22ul%22)%3B%20ul.className%20%3D%20%22%22%3B%20current_line%20%3D%20null%3B%20const%20styles%20%3D%20%7B%20margin%3A%20%2210px%200px%22%2C%20fontWeight%3A%20%22100%22%2C%20fontSize%3A%20%2220px%22%2C%20fontFamily%3A%20%22nyt-imperial%22%2C%20textTransform%3A%20%22uppercase%22%2C%20lineHeight%3A%20%2230px%22%2C%20%7D%3B%20for%20(start%20in%20word_starts)%20%7B%20const%20values%20%3D%20word_starts%5Bstart%5D%3B%20const%20fraction%20%3D%20render_fraction(values.current%2C%20values.total)%3B%20if%20(current_line%20%26%26%20start.charAt(0)%20!%3D%20current_line.charAt(0))%20%7B%20const%20line%20%3D%20document.createElement(%22li%22)%3B%20line.innerHTML%20%3D%20current_line%3B%20for%20(s%20in%20styles)%20%7B%20line.style%5Bs%5D%20%3D%20styles%5Bs%5D%3B%20%7D%20ul.appendChild(line)%3B%20current_line%20%3D%20%60%24%7Bstart%7D-%24%7Bfraction%7D%20%60%3B%20%7D%20else%20%7B%20if%20(current_line)%20%7B%20current_line%20%2B%3D%20%60%24%7Bstart%7D-%24%7Bfraction%7D%20%60%3B%20%7D%20else%20%7B%20current_line%20%3D%20%60%24%7Bstart%7D-%24%7Bfraction%7D%20%60%3B%20%7D%20%7D%20%7D%20return%20display_component(%22Two%20letter%20list%22%2C%20ul)%3B%20%7D%20function%20display_matrix(matrix)%20%7B%20tbl%20%3D%20document.createElement(%22table%22)%3B%20tbl.style.width%20%3D%20%22100px%22%3B%20for%20(const%20%5Brow_key%2C%20cols%5D%20of%20Object.entries(matrix))%20%7B%20const%20tr%20%3D%20tbl.insertRow()%3B%20for%20(%5Bi%2C%20col%5D%20of%20cols.entries())%20%7B%20const%20td%20%3D%20tr.insertCell()%3B%20td.innerHTML%20%3D%20col%3B%20td.style.minWidth%20%3D%20%2240px%22%3B%20td.style.height%20%3D%20%2230px%22%3B%20if%20(row_key%20%3D%3D%20%22%22%20%7C%7C%20row_key%20%3D%3D%20%22%CE%A3%22%20%7C%7C%20i%20%3D%3D%200%20%7C%7C%20i%20%3D%3D%20cols.length%20-%201)%20%7B%20td.style.fontWeight%20%3D%20%22700%22%3B%20td.style.textTransform%20%3D%20%22uppercase%22%3B%20%7D%20%7D%20%7D%20return%20display_component(%22Spelling%20Bee%20Grid%22%2C%20tbl)%3B%20%7D%20async%20function%20display_modal()%20%7B%20console.log(%22loading%20modal...%22)%3B%20const%20modal%20%3D%20document.createElement(%22div%22)%3B%20modal.height%20%3D%20100%3B%20modal.id%20%3D%20%22beehint-modal%22%3B%20remove_element(modal)%3B%20const%20container%20%3D%20document.getElementById(%22beehint-container%22)%3B%20container.appendChild(modal)%3B%20const%20results%20%3D%20get_current_words()%3B%20const%20%5Bword_starts%2C%20matrix%5D%20%3D%20await%20get_hints(results)%3B%20modal.appendChild(display_matrix(matrix))%3B%20modal.appendChild(display_word_starts(word_starts))%3B%20%7D%20function%20display_button()%20%7B%20const%20btn%20%3D%20document.createElement(%22button%22)%3B%20btn.innerHTML%20%3D%20%22Show%20hints%22%3B%20btn.id%20%3D%20%22beehint-button%22%3B%20btn.value%20%3D%20%22off%22%3B%20btn.style.background%20%3D%20%22none%22%3B%20btn.style.padding%20%3D%20%220%22%3B%20btn.style.border%20%3D%20%22none%22%3B%20btn.style.margin%20%3D%20%220px%200%2010px%22%3B%20btn.style.textDecoration%20%3D%20%22underline%22%3B%20remove_element(btn)%3B%20const%20container%20%3D%20document.getElementById(%22beehint-container%22)%3B%20container.appendChild(btn)%3B%20%7D%20document.addEventListener(%22click%22%2C%20function(e)%20%7B%20if%20(e.target%20%26%26%20e.target.id%20%3D%3D%20%22beehint-button%22)%20%7B%20const%20button%20%3D%20e.target%3B%20if%20(button.value%20%3D%3D%20%22off%22)%20%7B%20display_modal()%3B%20button.value%20%3D%20%22on%22%3B%20button.innerHTML%20%3D%20%22Hide%20Hints%22%3B%20%7D%20else%20%7B%20const%20modal%20%3D%20document.getElementById(%22beehint-modal%22)%3B%20remove_element(modal)%3B%20button.value%20%3D%20%22off%22%3B%20button.innerHTML%20%3D%20%22Show%20Hints%22%3B%20%7D%20%7D%20%7D)%3B%20function%20display_container()%20%7B%20const%20container%20%3D%20document.createElement(%22div%22)%3B%20container.className%20%3D%20%22beehint-container%22%3B%20container.id%20%3D%20%22beehint-container%22%3B%20container.style%20%3D%20%22margin-left%3A25px%3B%22%3B%20remove_element(container)%3B%20const%20heading%20%3D%20document.getElementsByClassName(%22sb-wordlist-heading%22)%5B0%5D%3B%20heading.parentNode.insertBefore(container%2C%20heading.nextSibling)%3B%20%7D%20function%20render_fraction(numerator%2C%20denominator)%20%7B%20if%20(numerator%20%3D%3D%20denominator)%20%7B%20return%20%60%3Cs%3E%24%7Bnumerator%7D%2F%24%7Bdenominator%7D%3C%2Fs%3E%60%3B%20%7D%20return%20%60%24%7Bnumerator%7D%2F%24%7Bdenominator%7D%60%3B%20%7D%20display_container()%3B%20display_button()%3B%20%7D)()%3B) and copy the link address and then save it to your bookmarks. Then when on the [spelling-bee website](https://www.nytimes.com/puzzles/spelling-bee) click the bookmarklet, a button to show/hide the hints will appear.
